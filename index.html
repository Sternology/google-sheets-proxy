<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Budget Dashboard</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; font-family: -apple-system, system-ui, sans-serif; }
        
        /* Transitions */
        .gauge-fill { transition: stroke-dashoffset 0.8s ease; }
        .transition-all { transition: all 0.3s ease; }
        
        /* Card Flip */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }

        /* Graph Animation */
        .draw-path {
            stroke-dasharray: 1;
            stroke-dashoffset: 1;
            animation: draw 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        @keyframes draw {
            from { stroke-dashoffset: 1; }
            to { stroke-dashoffset: 0; }
        }
    </style>
</head>
<body class="p-6">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- HELPERS ---
        const formatMoney = (val) => new Intl.NumberFormat('en-GB', { style: 'currency', currency: 'GBP', maximumFractionDigits: 0 }).format(val);
        const formatNumber = (val) => new Intl.NumberFormat('en-GB').format(val);

        const normalize = (text) => {
            if (!text) return '';
            return text.toLowerCase().replace(/–/g, '-').replace(/—/g, '-').replace(/\|/g, '').replace(/\s+/g, ' ').trim();
        };

        const parseSheetDate = (dateStr) => {
            if (!dateStr) return null;
            const s = String(dateStr).trim();
            const iso = s.match(/^(\d{4})[\/\-\.](\d{1,2})[\/\-\.](\d{1,2})/);
            if (iso) return new Date(
